# 更新的战力计算公式
## 单个战力的计算
设战斗力(force)=$F$

战力$ F = \sqrt {dps*hp}$

如果计算部件折损，则攻击部件只计算一半生命值

4个dps=1 hp=1 的creep 和 1个dps=4 hp=4 的creep。在不计算战损的情况下战力是一样的。

如果按照公式 $F=dps*hp$ 来算的话，前者=4，后者=16，肯定是不对的。

当有战损时，4个creep的输出量为4 3 2 1，总输出为原来的$10\over16$。

|提供的输出\\损失的生命值|0|1|2|3|
|:-|:-|:-|:-|:-|
|4|X||||
|3|X|X|||
|2|X|X|X||
|1|X|X|X|X|

## 战力相加

两个creep合一起，$F= \sqrt{{3 \over 4 }{(a+b)}^2} = {\sqrt 3 \over 2 } (a+b)$
|提供的输出\\损失的生命值|0|1|
|:-|:-|:-|
|2|X||
|1|X|X|

## 战力相加 多个

n个creep合一起，$ F= \sqrt{{{n(n+1)\over 2} \over n^2 }{(\displaystyle\sum_{i=1}^{n} F_i)}^2} $

$ = \sqrt{{(n+1) \over 2n}}\displaystyle\sum_{i=1}^{n} F_i $

## 实例，计算4个10M6A 和一个ram中的10M6A的战力比较

为计算方便 30dps =＞1 , 100hp=>1,攻击部件只计算1一半的生命值

$ F_{10M6A}=\sqrt{6 * 13}=\sqrt{78}=8.83 $

$ F_{10M6A+ram}= \sqrt{6(100+13)} = 26 $

计算四个10M6A结合的战斗力

$ combine(F_{10M6A},4) = \sqrt{5 \over 8} * 8.83 * 4 = 27.92 $

由此可见，4个10M6A 和一个ram中的10M6A 战力差不多。4个10M6A略强。

## 验证

10M6A dps=180，hp=1600，一个ram内的10M6A在9tick内能消灭一个10M6A。

一个10M6A在9tick 能输出$ 9 * 180 * {78 \over 96} =1310  $ 的damage。$ {78 \over 96}$计算了折损的攻击部件

第1个9tick的输出=1310*4

第2个9tick的输出=1310*3

第3个9tick的输出=1310*2

第4个9tick的输出=1310

sum=13100

$ HP_{10M6A+ram}=11600 $

结果为相差1500hp ，4个10M6A略强。

与模拟结果一致。
